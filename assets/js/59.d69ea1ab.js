(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{721:function(e,t,r){"use strict";r.r(t);var s=r(0),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"echarts"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#echarts"}},[e._v("#")]),e._v(" ECharts")]),e._v(" "),r("p",[r("code",[e._v("ECharts")]),e._v(" 结合 "),r("code",[e._v("Marker")]),e._v(" 即可在地图中展示图表数据。前面说过，"),r("code",[e._v("Marker")]),e._v(" ( "),r("strong",[e._v("如果数量过多，会出现重叠和性能问题")]),e._v(" ），但是很多时候又不得不使用，比如在需要用复杂的形式展示数据时，"),r("code",[e._v("layer")]),e._v(" 通常满足不了需求。")]),e._v(" "),r("p",[e._v("在浏览官方案例 "),r("a",{attrs:{href:"https://docs.mapbox.com/mapbox-gl-js/example/cluster-html/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Display HTML clusters with custom properties"),r("OutboundLink")],1),e._v(" 时，想到：可结合 "),r("code",[e._v("cluster")]),e._v(" 属性，来解决 "),r("code",[e._v("Marker")]),e._v(" 在地图中显示重叠以及性能问题。")]),e._v(" "),r("h2",{attrs:{id:"饼图"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#饼图"}},[e._v("#")]),e._v(" 饼图")]),e._v(" "),r("p",[e._v("使用聚合属性来解决图表重叠和性能问题的关键在于：在数据变化时，通过查询可视范围内的 "),r("code",[e._v("聚合要素")]),e._v(" 及 "),r("code",[e._v("非聚合要素")]),e._v(" 位置显示图表。")]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("聚合要素的属性与原始属性不一致（参考 "),r("a",{attrs:{href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/#sources-geojson-cluster",target:"_blank",rel:"noopener noreferrer"}},[e._v("geojson-cluster"),r("OutboundLink")],1),e._v("），需要通过 "),r("code",[e._v("GeoJSONSource.getClusterLeaves()")]),e._v(" 方法来获取原始要素属性（参考："),r("a",{attrs:{href:"https://docs.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterleaves",target:"_blank",rel:"noopener noreferrer"}},[e._v("getClusterLeaves"),r("OutboundLink")],1),e._v("）。")]),e._v(" "),r("p",[e._v("因为聚合点要素与实际要素的位置有一定的偏差，可以取离聚合点最近的要素。")]),e._v(" "),r("p",[e._v("非聚合要素属性与原始属性一致。")])]),e._v(" "),r("p",[e._v("如果需要将 "),r("code",[e._v("ECharts")]),e._v(" 图表的事件与地图结合做交互，由于 "),r("code",[e._v("ECharts")]),e._v(" 事件回调参数中不能设置自定义属性，我们可以将相关属性融入到 ECharts 的默认属性中，比如：下面示例中将要素的坐标信息放在了 "),r("code",[e._v("seriesName")]),e._v("。")]),e._v(" "),r("blockquote",[r("p",[e._v("详细实现请查看示例代码")])]),e._v(" "),r("ClientOnly",[r("common-code-view",{attrs:{name:"echarts-pie"}})],1)],1)}),[],!1,null,null,null);t.default=o.exports}}]);