(window.webpackJsonp=window.webpackJsonp||[]).push([[11,51],{110:function(t,e,n){"use strict";var i=n(4);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},116:function(t,e,n){var i=n(19),a=n(69)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),a))?n:o?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},129:function(t,e,n){"use strict";var i=n(116),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},130:function(t,e,n){"use strict";n(134);var i=n(17),a=n(16),o=n(5),r=n(18),s=n(69),l=n(92),c=s("species"),u=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),p=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=s(t),h=!o((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),f=h?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!e})):void 0;if(!h||!f||"replace"===t&&!u||"split"===t&&!p){var m=/./[d],v=n(r,d,""[t],(function(t,e,n,i,a){return e.exec===l?h&&!a?{done:!0,value:m.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}})),g=v[0],b=v[1];i(String.prototype,t,g),a(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},134:function(t,e,n){"use strict";var i=n(92);n(30)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},140:function(t,e,n){var i=n(3),a=n(19),o=n(69)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==a(t))}},141:function(t,e,n){"use strict";var i=n(149)(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},149:function(t,e,n){var i=n(20),a=n(18);t.exports=function(t){return function(e,n){var o,r,s=String(a(e)),l=i(n),c=s.length;return l<0||l>=c?t?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(r=s.charCodeAt(l+1))<56320||r>57343?t?s.charAt(l):o:t?s.slice(l,l+2):r-56320+(o-55296<<10)+65536}}},171:function(t,e,n){var i=n(4),a=n(36),o=n(69)("species");t.exports=function(t,e){var n,r=i(t).constructor;return void 0===r||null==(n=i(r)[o])?e:a(n)}},214:function(t,e,n){"use strict";var i=n(140),a=n(4),o=n(171),r=n(141),s=n(32),l=n(129),c=n(92),u=n(5),p=Math.min,d=[].push,h=!u((function(){RegExp(4294967295,"y")}));n(130)("split",2,(function(t,e,n,u){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(a,t,e);for(var o,r,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,h=void 0===e?4294967295:e>>>0,f=new RegExp(t.source,u+"g");(o=c.call(f,a))&&!((r=f.lastIndex)>p&&(l.push(a.slice(p,o.index)),o.length>1&&o.index<a.length&&d.apply(l,o.slice(1)),s=o[0].length,p=r,l.length>=h));)f.lastIndex===o.index&&f.lastIndex++;return p===a.length?!s&&f.test("")||l.push(""):l.push(a.slice(p)),l.length>h?l.slice(0,h):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var a=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,a,i):f.call(String(a),n,i)},function(t,e){var i=u(f,t,this,e,f!==n);if(i.done)return i.value;var c=a(t),d=String(this),m=o(c,RegExp),v=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),b=new m(h?c:"^(?:"+c.source+")",g),x=void 0===e?4294967295:e>>>0;if(0===x)return[];if(0===d.length)return null===l(b,d)?[d]:[];for(var y=0,C=0,E=[];C<d.length;){b.lastIndex=h?C:0;var _,k=l(b,h?d:d.slice(C));if(null===k||(_=p(s(b.lastIndex+(h?0:C)),d.length))===y)C=r(d,C,v);else{if(E.push(d.slice(y,C)),E.length===x)return E;for(var w=1;w<=k.length-1;w++)if(E.push(k[w]),E.length===x)return E;C=y=_}}return E.push(d.slice(y)),E}]}))},311:function(t,e,n){},56:function(t,e,n){},588:function(t,e,n){"use strict";var i=n(311);n.n(i).a},59:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={DEFAULT:"mapbox://styles/huanglii/ck1n985b20oan1cmhp4i0o9c9?optimize=true",SATELLITE:"mapbox://styles/mapbox/satellite-v9",DARK:"mapbox://styles/huanglii/ck1ocwsbl1fja1cloy67tyefi?optimize=true",GRAY:"mapbox://styles/huanglii/ck1naxpm00gvj1co6r4pxgxzl?optimize=true",MONOCHROME:"mapbox://styles/huanglii/ck3gplwrs0baz1cpe6mgy8aap?optimize=true",FLUORESCENCE:"mapbox://styles/huanglii/ck23131s00los1cnz1qjms49i?optimize=true",WATERLIGHT:"mapbox://styles/huanglii/cjweb960x1nbn1drxxtuaz9cr?optimize=true"}},61:function(t,e,n){"use strict";var i=n(56);n.n(i).a},62:function(t,e,n){"use strict";n.r(e);n(67),n(68),n(66),n(31);var i=n(76),a=n.n(i),o=n(71),r=n.n(o),s=(n(77),n(73)),l=n(74),c=function(){function t(e){Object(s.a)(this,t),this._className="mapboxgl-ctrl",this._options=Object.assign({},{zoom:1,center:[0,0]},e),this._onClickHome=this._onClickHome.bind(this)}return Object(l.a)(t,[{key:"onAdd",value:function(t){return this._map=t,this._container=u.create("div","".concat(this._className," mapboxgl-ctrl-group")),this._render(),this._container}},{key:"onRemove",value:function(){u.remove(this._container),this._map=void 0}},{key:"_render",value:function(){var t=u.create("button","".concat(this._className,"-icon ").concat(this._className,"-home"),this._container);t.type="button",t.addEventListener("click",this._onClickHome)}},{key:"_onClickHome",value:function(){this._map.easeTo(this._options)}}]),t}(),u={create:function(t,e,n){var i=window.document.createElement(t);return void 0!==e&&(i.className=e),n&&n.appendChild(i),i},remove:function(t){t.parentNode&&t.parentNode.removeChild(t)}},p=n(59),d=(n(78),{name:"base-map",props:{height:{type:Number,default:520},mapOptions:{type:Object},mapClickable:{type:Boolean,default:!0},borderOptions:{type:Object}},data:function(){return{map:null,maploaded:!1,mapDefaultOptions:{container:a()(),style:p.a.DEFAULT,center:[-74.5,40],zoom:6,minZoom:0,maxZoom:22,scrollZoom:!0,pitch:0,bearing:0,antialias:!1},borderDefaultOptions:{layout:{visibility:"none"},paint:{"line-color":"hsl(357, 67%, 60%)","line-opacity":["step",["zoom"],1,10,0],"line-width":["interpolate",["linear"],["zoom"],0,1,22,3]},beforeId:""}}},computed:{mapContainer:function(){return this.mapOptions.container||this.mapDefaultOptions.container}},mounted:function(){var t=Object.assign({},this.mapDefaultOptions,this.mapOptions);this.initMap(t),window.addEventListener("resize",this.resize)},methods:{initMap:function(t){r.a.accessToken="pk.eyJ1IjoiaHVhbmdsaWkiLCJhIjoiY2pzNHBtendwMDZ2ZDQzbnVmZXdtMDlvdiJ9.GSija86yNNR4ssBtFFpx0g",this.map=new r.a.Map(t),this.map.addControl(new r.a.NavigationControl,"top-left");var e=t.center,n=t.zoom,i=t.pitch,a=t.bearing;this.map.addControl(new c({center:e,zoom:n,pitch:i,bearing:a}),"bottom-left"),this.map.addControl(new r.a.FullscreenControl,"top-left"),this.map.on("load",this.handleMapLoaded)},handleMapLoaded:function(t){this.maploaded=!0,this.$emit("load",t.target),this.mapClickable&&this.map.on("click",this.handleMapClick)},handleMapClick:function(t){console.log(t.lngLat);var e=this.map.queryRenderedFeatures(t.point);if(e.length>0){var n=e[0],i=n.layer,a=n.properties;Object.keys(a).length>0&&(new r.a.Popup).setLngLat(t.lngLat).setHTML(this.createPropHtml(i.id,a)).addTo(this.map)}},createPropHtml:function(t,e){return'\n        <div class="title"><b>'.concat(t,'</b></div>\n        <div class="content">\n          ').concat(Object.keys(e).map((function(t){return"".concat("<p><b>".concat(t,": </b>").concat(e[t],"</p>"))})).join(""),"\n        </div>\n      ")},addBorderLayer:function(){var t=Object.assign({},this.borderDefaultOptions,this.borderOptions),e=t.layout,n=t.paint,i=t.beforeId;this.map.addSource("border",{type:"vector",url:"mapbox://huanglii.4nxu8jv0"}),this.map.addLayer({id:"border-2oej0r",source:"border","source-layer":"Border-2oej0r",type:"line",layout:e,paint:n},i||void 0)},resize:function(){this.map.resize()}}}),h=(n(61),n(0)),f=Object(h.a)(d,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"map-wrapper"},[e("div",{style:{width:"100%",height:this.height+"px",borderRadius:"6px"},attrs:{id:this.mapContainer}},[this._t("custom")],2),this._v(" "),this.maploaded?this._t("default"):this._e()],2)}),[],!1,null,null,null);e.default=f.exports},653:function(t,e,n){"use strict";n.r(e);n(66),n(214);var i=n(62),a=n(59);var o={components:{baseMap:i.default},data:function(){return{map:void 0,mapOptions:{style:a.a.GRAY,center:[107.744809,30.180706],zoom:6,minZoom:4},legends:[["0-20","#FFD273"],["20-40","#E86D68"],["40-60","#A880FF"],["60-80","#68E0E8"],["80-100","#9BFF69"]]}},methods:{handleMapLoaded:function(t){this.map=t,function(t,e){t.addLayer({id:"choropleth-layer",type:"fill",source:{type:"geojson",data:e},paint:{"fill-color":["case",["<",["get","value"],20],"#FFD273",["<",["get","value"],40],"#E86D68",["<",["get","value"],60],"#A880FF",["<",["get","value"],80],"#68E0E8",["<=",["get","value"],100],"#9BFF69","#000"],"fill-opacity":.85}},"poi-label")}(t,this.$withBase("/data/cq.geojson"))},setFilter:function(t){var e=t.split("-");this.map.setFilter("choropleth-layer",["all",[">=",["get","value"],e[0]-0],["<",["get","value"],e[1]-0]])}}},r=(n(588),n(0)),s=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-map",{attrs:{"map-options":t.mapOptions},on:{load:t.handleMapLoaded}},[n("div",{staticClass:"legend custom"},[n("div",{staticClass:"legend-item",on:{click:function(e){return t.setFilter("0-100")}}},[n("span",{staticClass:"square"}),t._v(" "),n("span",{staticClass:"text"},[t._v("全部值")])]),t._v(" "),t._l(t.legends,(function(e,i){return n("div",{key:i,staticClass:"legend-item",on:{click:function(n){return t.setFilter(e[0])}}},[n("span",{staticClass:"square",style:{backgroundColor:e[1]}}),t._v(" "),n("span",{staticClass:"text"},[t._v(t._s(e[0]))])])}))],2)])}),[],!1,null,null,null);e.default=s.exports},92:function(t,e,n){"use strict";var i,a,o=n(110),r=RegExp.prototype.exec,s=String.prototype.replace,l=r,c=(i=/a/,a=/b*/g,r.call(i,"a"),r.call(a,"a"),0!==i.lastIndex||0!==a.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(t){var e,n,i,a,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),c&&(e=l.lastIndex),i=r.call(l,t),c&&i&&(l.lastIndex=l.global?i.index+i[0].length:e),u&&i&&i.length>1&&s.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i}),t.exports=l}}]);