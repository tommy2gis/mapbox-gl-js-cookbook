(window.webpackJsonp=window.webpackJsonp||[]).push([[22,51],{56:function(e,t,o){},59:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var a={DEFAULT:"mapbox://styles/huanglii/ck1n985b20oan1cmhp4i0o9c9?optimize=true",SATELLITE:"mapbox://styles/mapbox/satellite-v9",DARK:"mapbox://styles/huanglii/ck1ocwsbl1fja1cloy67tyefi?optimize=true",GRAY:"mapbox://styles/huanglii/ck1naxpm00gvj1co6r4pxgxzl?optimize=true",MONOCHROME:"mapbox://styles/huanglii/ck3gplwrs0baz1cpe6mgy8aap?optimize=true",FLUORESCENCE:"mapbox://styles/huanglii/ck23131s00los1cnz1qjms49i?optimize=true",WATERLIGHT:"mapbox://styles/huanglii/cjweb960x1nbn1drxxtuaz9cr?optimize=true"}},593:function(e){e.exports=JSON.parse('{"features":[{"type":"Feature","properties":{"level":1,"name":"Bird Exhibit","height":0,"base_height":0,"color":"orange"},"geometry":{"coordinates":[[[-87.618312,41.866282],[-87.61832,41.866674],[-87.618087,41.866676],[-87.618087,41.866661],[-87.617423,41.86667],[-87.617416,41.8663],[-87.618312,41.866282]]],"type":"Polygon"},"id":"06e8fa0b3f851e3ae0e1da5fc17e111e"},{"type":"Feature","properties":{"level":1,"name":"Bird Exhibit","height":40,"base_height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.617808,41.866266],[-87.617806,41.866293],[-87.617415,41.866298],[-87.617424,41.866671],[-87.617382,41.866669],[-87.617371,41.866274],[-87.617808,41.866266]]],"type":"Polygon"},"id":"08a10ab2bf15c4d14669b588062f7f08"},{"type":"Feature","properties":{"level":1,"name":"East Hallway","base_height":0,"height":0,"color":"indigo"},"geometry":{"coordinates":[[[-87.616704,41.866141],[-87.616707,41.866338],[-87.61572,41.866355],[-87.61572,41.866148],[-87.616704,41.866141]]],"type":"Polygon"},"id":"09ead44537d94ece576c7bc001c33e53"},{"type":"Feature","properties":{"level":1,"name":"East Entrance","base_height":0,"height":0,"color":"violet"},"geometry":{"coordinates":[[[-87.61544,41.866149],[-87.615449,41.866358],[-87.615721,41.866355],[-87.61572,41.866143],[-87.61544,41.866149]]],"type":"Polygon"},"id":"12251ebf764b36cf3b8c5ad42e2deb29"},{"type":"Feature","properties":{"height":0,"base_height":0,"level":1,"name":"Under the Earth","color":"red"},"geometry":{"coordinates":[[[-87.616701,41.865816],[-87.616705,41.866115],[-87.615712,41.866125],[-87.615706,41.865802],[-87.615936,41.865801],[-87.615938,41.865824],[-87.616701,41.865816]]],"type":"Polygon"},"id":"1ce4f8c186a40b9927006644e27bfd69"},{"type":"Feature","properties":{"level":1,"name":"Atrium","base_height":0,"height":0,"color":"yellow"},"geometry":{"coordinates":[[[-87.617365,41.865799],[-87.6167,41.865815],[-87.616718,41.866672],[-87.617384,41.86667],[-87.617365,41.865799]]],"type":"Polygon"},"id":"369f5d8865e677120b7576b1de6082eb"},{"type":"Feature","properties":{"level":1,"name":"Ancient Egypt","height":0,"base_height":0,"color":"blue"},"geometry":{"coordinates":[[[-87.61807,41.865761],[-87.618299,41.865758],[-87.618307,41.866139],[-87.617407,41.86615],[-87.617399,41.865799],[-87.61807,41.865789],[-87.61807,41.865761]]],"type":"Polygon"},"id":"3e9f198afe6d7dff01ac81c6eaa511fb"},{"type":"Feature","properties":{"level":1,"name":"West Arch","height":40,"base_height":30,"color":"grey"},"geometry":{"coordinates":[[[-87.617424,41.86667],[-87.617384,41.86667],[-87.617365,41.865799],[-87.617405,41.865799],[-87.617424,41.86667]]],"type":"Polygon"},"id":"402706f28b793d27c78d9615fff747f2"},{"type":"Feature","properties":{"level":1,"name":"Bird Exhibit","height":40,"base_height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.618312,41.866283],[-87.61797,41.866288],[-87.617972,41.866265],[-87.618312,41.866259],[-87.618312,41.866283]]],"type":"Polygon"},"id":"43e1e2fc8399dee075ad59764f2a2878"},{"type":"Feature","properties":{"name":"Arch","level":1,"color":"grey","base_height":30,"height":40},"geometry":{"coordinates":[[[-87.617971,41.866291],[-87.617973,41.866265],[-87.617805,41.866267],[-87.617806,41.866294],[-87.617971,41.866291]]],"type":"Polygon"},"id":"4528ad9b9264cbec65bb2e55ac0012c1"},{"type":"Feature","properties":{"level":1,"color":"grey","base_height":30,"height":40,"name":"Arch"},"geometry":{"coordinates":[[[-87.617979,41.866167],[-87.617797,41.866168],[-87.617799,41.866145],[-87.617976,41.866144],[-87.617979,41.866167]]],"type":"Polygon"},"id":"4be6817c3b595042c8d971eebd0c4fd3"},{"type":"Feature","properties":{"name":"Kids Zone","level":1,"base_height":0,"height":0,"color":"green"},"geometry":{"coordinates":[[[-87.616718,41.866675],[-87.616709,41.866371],[-87.615725,41.866381],[-87.615732,41.866711],[-87.61596,41.866711],[-87.61596,41.866688],[-87.616718,41.866675]]],"type":"Polygon"},"id":"5775eba03674ea1cb3550ffb38321432"},{"type":"Feature","properties":{"level":1,"color":"grey","name":"Arch","height":40,"base_height":30},"geometry":{"coordinates":[[[-87.616286,41.866119],[-87.616286,41.866144],[-87.616089,41.866149],[-87.616086,41.86612],[-87.616286,41.866119]]],"type":"Polygon"},"id":"598832b1512dc9facc855c5367251531"},{"type":"Feature","properties":{"level":1,"name":"Arch","color":"grey","height":40,"base_height":30},"geometry":{"coordinates":[[[-87.616287,41.866343],[-87.616288,41.866374],[-87.616076,41.866378],[-87.616077,41.866347],[-87.616287,41.866343]]],"type":"Polygon"},"id":"59ed13d4411ff5f88714d9af539788d2"},{"type":"Feature","properties":{"level":1,"color":"grey","name":"center_arch","base_height":30,"height":40},"geometry":{"coordinates":[[[-87.61737,41.866198],[-87.617372,41.86624],[-87.616708,41.866243],[-87.616708,41.866203],[-87.61737,41.866198]]],"type":"Polygon"},"id":"67f8952a18dfe21ee0744a3e86bc41d8"},{"type":"Feature","properties":{"level":1,"name":"Kids Zone","height":0,"base_height":40,"color":"grey"},"geometry":{"coordinates":[[[-87.615719,41.866354],[-87.615718,41.866381],[-87.616077,41.866378],[-87.616077,41.866347],[-87.615719,41.866354]]],"type":"Polygon"},"id":"6bb2c92386bcf4678113d6b3e400ae3b"},{"type":"Feature","properties":{"level":1,"name":"Under the Earth","height":40,"base_height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.616089,41.866149],[-87.616089,41.866119],[-87.615711,41.866124],[-87.615713,41.866147],[-87.616089,41.866149]]],"type":"Polygon"},"id":"844c87987089df6b9db3923f6a00e4d6"},{"type":"Feature","properties":{"level":1,"name":"Under the Earth","height":40,"base_height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.616707,41.866115],[-87.616286,41.866119],[-87.616285,41.866144],[-87.616705,41.866141],[-87.616707,41.866115]]],"type":"Polygon"},"id":"85547a1ecdbd2ca1fdc6324aea3c6b70"},{"type":"Feature","properties":{"level":1,"name":"North Entrance","height":0,"base_height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.617386,41.86667],[-87.617388,41.866786],[-87.617228,41.866786],[-87.617226,41.866848],[-87.616867,41.866849],[-87.616868,41.866791],[-87.616718,41.866791],[-87.616718,41.866672],[-87.617386,41.86667]]],"type":"Polygon"},"id":"91ab1ee01729c33568c7b57eb258e699"},{"type":"Feature","properties":{"level":1,"name":"Ancient Egypt","height":40,"base_height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.617394,41.865799],[-87.617405,41.86615],[-87.617802,41.866147],[-87.6178,41.866167],[-87.617369,41.866172],[-87.617364,41.865799],[-87.617394,41.865799]]],"type":"Polygon"},"id":"943171d55d207024791e15294def7e8f"},{"type":"Feature","properties":{"level":1,"name":"Ancient Egypt","height":40,"base_height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.617976,41.866166],[-87.617976,41.866143],[-87.618309,41.866139],[-87.618309,41.866161],[-87.617976,41.866166]]],"type":"Polygon"},"id":"a37230898905988cab9b72927dc99258"},{"type":"Feature","properties":{"name":"West Hallway","level":1,"base_height":0,"height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.618309,41.866161],[-87.618312,41.86626],[-87.61737,41.866272],[-87.61737,41.86617],[-87.618309,41.866161]]],"type":"Polygon"},"id":"c7cc79da8711d746985f23a9b22c1d5e"},{"type":"Feature","properties":{"level":1,"name":"Kids Zone","height":40,"base_height":0,"color":"grey"},"geometry":{"coordinates":[[[-87.616286,41.866343],[-87.616286,41.866374],[-87.61671,41.866371],[-87.616708,41.866338],[-87.616286,41.866343]]],"type":"Polygon"},"id":"cfbf2aee6a73a45c12e7fc7432d6009e"},{"type":"Feature","properties":{"level":1,"name":"South Entrance","height":0,"base_height":0,"color":"teal"},"geometry":{"coordinates":[[[-87.617359,41.865801],[-87.617355,41.865674],[-87.617221,41.865677],[-87.617219,41.86559],[-87.616824,41.865595],[-87.616826,41.86568],[-87.616695,41.865683],[-87.6167,41.865813],[-87.617359,41.865801]]],"type":"Polygon"},"id":"d71ab89467076ad023161c37f4ff0d5f"},{"type":"Feature","properties":{"level":1,"name":"East Arch","height":40,"base_height":30,"color":"grey"},"geometry":{"coordinates":[[[-87.616688,41.866675],[-87.616716,41.866675],[-87.616699,41.865814],[-87.616665,41.865814],[-87.616688,41.866675]]],"type":"Polygon"},"id":"dd2baec57e4079eb65dcae5be495da62"},{"type":"Feature","properties":{"level":1,"name":"outer-walls","base_height":0,"height":40,"color":"grey"},"geometry":{"coordinates":[[[-87.618087,41.86666],[-87.618087,41.866674],[-87.618319,41.866674],[-87.618298,41.865757],[-87.618326,41.865756],[-87.618347,41.866693],[-87.618068,41.866696],[-87.618067,41.866675],[-87.61741,41.866684],[-87.617416,41.866802],[-87.617247,41.866803],[-87.617246,41.866866],[-87.616846,41.866868],[-87.616848,41.866807],[-87.61669,41.866811],[-87.616693,41.866693],[-87.615992,41.866701],[-87.615992,41.866729],[-87.615703,41.866733],[-87.615689,41.866377],[-87.615412,41.866382],[-87.615411,41.866122],[-87.615689,41.866119],[-87.615682,41.865781],[-87.615966,41.865779],[-87.615969,41.865798],[-87.616669,41.865794],[-87.616663,41.865662],[-87.6168,41.865661],[-87.616796,41.865571],[-87.61726,41.865559],[-87.617258,41.865654],[-87.617388,41.865652],[-87.617395,41.865778],[-87.618045,41.865773],[-87.618044,41.865742],[-87.618325,41.865739],[-87.618326,41.865758],[-87.61807,41.865761],[-87.61807,41.865789],[-87.617356,41.8658],[-87.617356,41.865672],[-87.617218,41.865677],[-87.617215,41.86559],[-87.616822,41.865595],[-87.616827,41.86568],[-87.616694,41.865681],[-87.616697,41.865813],[-87.615939,41.865824],[-87.615937,41.8658],[-87.615706,41.865802],[-87.615713,41.866143],[-87.615441,41.86615],[-87.61545,41.866357],[-87.615724,41.866353],[-87.615733,41.866712],[-87.615959,41.86671],[-87.615959,41.866688],[-87.616719,41.866672],[-87.61672,41.866791],[-87.616869,41.86679],[-87.616868,41.86685],[-87.617223,41.866847],[-87.617227,41.866786],[-87.617387,41.866785],[-87.617383,41.86667],[-87.618087,41.86666]]],"type":"Polygon"},"id":"ef6512f46485e27963c248bcc945c3db"}],"type":"FeatureCollection"}')},61:function(e,t,o){"use strict";var a=o(56);o.n(a).a},62:function(e,t,o){"use strict";o.r(t);o(67),o(68),o(66),o(31);var a=o(76),r=o.n(a),i=o(71),n=o.n(i),s=(o(77),o(73)),c=o(74),l=function(){function e(t){Object(s.a)(this,e),this._className="mapboxgl-ctrl",this._options=Object.assign({},{zoom:1,center:[0,0]},t),this._onClickHome=this._onClickHome.bind(this)}return Object(c.a)(e,[{key:"onAdd",value:function(e){return this._map=e,this._container=p.create("div","".concat(this._className," mapboxgl-ctrl-group")),this._render(),this._container}},{key:"onRemove",value:function(){p.remove(this._container),this._map=void 0}},{key:"_render",value:function(){var e=p.create("button","".concat(this._className,"-icon ").concat(this._className,"-home"),this._container);e.type="button",e.addEventListener("click",this._onClickHome)}},{key:"_onClickHome",value:function(){this._map.easeTo(this._options)}}]),e}(),p={create:function(e,t,o){var a=window.document.createElement(e);return void 0!==t&&(a.className=t),o&&o.appendChild(a),a},remove:function(e){e.parentNode&&e.parentNode.removeChild(e)}},h=o(59),d=(o(78),{name:"base-map",props:{height:{type:Number,default:520},mapOptions:{type:Object},mapClickable:{type:Boolean,default:!0},borderOptions:{type:Object}},data:function(){return{map:null,maploaded:!1,mapDefaultOptions:{container:r()(),style:h.a.DEFAULT,center:[-74.5,40],zoom:6,minZoom:0,maxZoom:22,scrollZoom:!0,pitch:0,bearing:0,antialias:!1},borderDefaultOptions:{layout:{visibility:"none"},paint:{"line-color":"hsl(357, 67%, 60%)","line-opacity":["step",["zoom"],1,10,0],"line-width":["interpolate",["linear"],["zoom"],0,1,22,3]},beforeId:""}}},computed:{mapContainer:function(){return this.mapOptions.container||this.mapDefaultOptions.container}},mounted:function(){var e=Object.assign({},this.mapDefaultOptions,this.mapOptions);this.initMap(e),window.addEventListener("resize",this.resize)},methods:{initMap:function(e){n.a.accessToken="pk.eyJ1IjoiaHVhbmdsaWkiLCJhIjoiY2pzNHBtendwMDZ2ZDQzbnVmZXdtMDlvdiJ9.GSija86yNNR4ssBtFFpx0g",this.map=new n.a.Map(e),this.map.addControl(new n.a.NavigationControl,"top-left");var t=e.center,o=e.zoom,a=e.pitch,r=e.bearing;this.map.addControl(new l({center:t,zoom:o,pitch:a,bearing:r}),"bottom-left"),this.map.addControl(new n.a.FullscreenControl,"top-left"),this.map.on("load",this.handleMapLoaded)},handleMapLoaded:function(e){this.maploaded=!0,this.$emit("load",e.target),this.mapClickable&&this.map.on("click",this.handleMapClick)},handleMapClick:function(e){console.log(e.lngLat);var t=this.map.queryRenderedFeatures(e.point);if(t.length>0){var o=t[0],a=o.layer,r=o.properties;Object.keys(r).length>0&&(new n.a.Popup).setLngLat(e.lngLat).setHTML(this.createPropHtml(a.id,r)).addTo(this.map)}},createPropHtml:function(e,t){return'\n        <div class="title"><b>'.concat(e,'</b></div>\n        <div class="content">\n          ').concat(Object.keys(t).map((function(e){return"".concat("<p><b>".concat(e,": </b>").concat(t[e],"</p>"))})).join(""),"\n        </div>\n      ")},addBorderLayer:function(){var e=Object.assign({},this.borderDefaultOptions,this.borderOptions),t=e.layout,o=e.paint,a=e.beforeId;this.map.addSource("border",{type:"vector",url:"mapbox://huanglii.4nxu8jv0"}),this.map.addLayer({id:"border-2oej0r",source:"border","source-layer":"Border-2oej0r",type:"line",layout:t,paint:o},a||void 0)},resize:function(){this.map.resize()}}}),y=(o(61),o(0)),g=Object(y.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"map-wrapper"},[t("div",{style:{width:"100%",height:this.height+"px",borderRadius:"6px"},attrs:{id:this.mapContainer}},[this._t("custom")],2),this._v(" "),this.maploaded?this._t("default"):this._e()],2)}),[],!1,null,null,null);t.default=g.exports},648:function(e,t,o){"use strict";o.r(t);var a=o(62),r=o(391),i=(o(259),o(589),o(591),o(66),o(73)),n=o(74),s=o(71),c=o.n(s),l=o(592),p=o.n(l),h=function(){function e(t){Object(i.a)(this,e),this.options=t,this.id=this.options.id||"custom-layer",this.type="custom",this.renderingMode="3d",this.camera=new r.a,this.scene=new r.h,this.world=new r.c,this.scene.add(this.world),this.raycaster=new r.g}return Object(n.a)(e,[{key:"onAdd",value:function(e,t){this.map=e,this._addTextGeometry(),this.renderer=new r.l({canvas:e.getCanvas(),context:t,antialias:!0}),this.renderer.autoClear=!1}},{key:"render",value:function(e,t){var o=(new r.d).fromArray(t),a=(new r.d).makeTranslation(this.modelTransform.translateX,this.modelTransform.translateY,this.modelTransform.translateZ).scale(new r.k(this.modelTransform.scale,-this.modelTransform.scale,this.modelTransform.scale));this.camera.projectionMatrix=o.multiply(a),this.renderer.state.reset(),this.renderer.render(this.scene,this.camera)}},{key:"queryRenderedFeatures",value:function(e){var t=new r.j;return t.x=e.x/this.map.transform.width*2-1,t.y=1-e.y/this.map.transform.height*2,this.raycaster.setFromCamera(t,this.camera),this.raycaster.intersectObjects(this.world.children,!0)}},{key:"_addTextGeometry",value:function(){var e=[],t=this.options.source;if("[object String]"===Object.prototype.toString.call(t)?e=this.map.getSource(this.options.source)._data.features:p.a.valid(t)&&(e=t.features),0!==e.length){var o=e[0].geometry.coordinates,a=c.a.MercatorCoordinate.fromLngLat(o,0),i=a.meterInMercatorCoordinateUnits();this.modelTransform={translateX:a.x,translateY:a.y,translateZ:a.z,scale:i};for(var n=this.options.style,s=0;s<e.length;s++){var l=e[s],h=l.properties,d=l.geometry,y=this._getPropertyValue(h,n.text),g=this._getPropertyValue(h,n["height-offset"])||0,m=this._getPropertyValue(h,n.height)+g,u=this._getPropertyValue(h,n["text-color"]),b=this._getPropertyValue(h,n["font-size"])||4,f=d.coordinates,v=c.a.MercatorCoordinate.fromLngLat(f,m),_=new r.i(y,{font:this.options.font,size:b,height:0}),x=new r.f({color:u}),w=new r.e(_,x);w.position.x=(v.x-a.x)/i,w.position.y=-(v.y-a.y)/i,w.position.z=(v.z-a.z)/i,this.world.add(w)}}}},{key:"_getPropertyValue",value:function(e,t){return Array.isArray(t)&&"get"===t[0]?e[t[1]]:t}}]),e}(),d=o(593),y={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[-87.61787282255271,41.86594037453304]},properties:{title:"咖啡",height:30,color:"#ee7170"}},{type:"Feature",geometry:{type:"Point",coordinates:[-87.61615278964635,41.86594037453304]},properties:{title:"牛奶",height:20,color:"#72ba6f"}},{type:"Feature",geometry:{type:"Point",coordinates:[-87.61787282255271,41.866463903152635]},properties:{title:"茶",height:40,color:"#7372eb"}}]};var g={components:{baseMap:a.default},data:function(){return{mapOptions:{center:[-87.61694,41.86625],zoom:17.5,pitch:30,bearing:20,antialias:!0}}},methods:{handleMapLoaded:function(e){e.removeLayer("poi-label"),function(e,t){e.addSource("point-source",{type:"geojson",data:y}),e.addSource("indoor-source",{type:"geojson",data:d}),e.addLayer({id:"room-extrusion",type:"fill-extrusion",source:"indoor-source",paint:{"fill-extrusion-color":["get","color"],"fill-extrusion-height":["get","height"],"fill-extrusion-base":["get","base_height"],"fill-extrusion-opacity":.75}}),e.addLayer({id:"point-layer",type:"circle",source:"point-source",paint:{"circle-radius":3,"circle-color":"red"}}),(new r.b).load(t,(function(t){var o=new h({id:"symbol-layer",source:"point-source",style:{"height-offset":1,height:["get","height"],text:["get","title"],"text-color":"#fff","font-size":5},font:t});e.addLayer(o)}))}(e,this.$withBase("/fonts/PangMenZhengDao_Regular.json"))}}},m=o(0),u=Object(m.a)(g,(function(){var e=this.$createElement;return(this._self._c||e)("base-map",{attrs:{"map-options":this.mapOptions,"map-clickable":!1},on:{load:this.handleMapLoaded}})}),[],!1,null,null,null);t.default=u.exports}}]);